(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-424dc0a3"],{1442:function(s,n,t){"use strict";var e=t("74e6"),o=t.n(e);o.a},"26d3":function(s,n,t){"use strict";t.r(n);var e=function(){var s=this,n=s.$createElement,t=s._self._c||n;return t("div",[t("NavBar"),t("UserSettings")],1)},o=[],i=function(){var s=this,n=s.$createElement,t=s._self._c||n;return t("div",{attrs:{id:"user-settings"}},[t("b-card",{staticStyle:{"text-align":"center"},attrs:{title:"Settings","align-h":"center"}},[s.isSignedIn?t("b-container",{staticClass:"signedin-container"},[t("b-alert",{attrs:{show:s.dismissCountDown,dismissible:"",variant:"success"},on:{dismissed:function(n){s.dismissCountDown=0},"dismiss-count-down":s.countDownChanged}},[t("p",[s._v(s._s(s.messages))])]),t("b-row",{staticStyle:{"padding-bottom":"20px"},attrs:{"align-h":"center"}},[t("SignOut")],1),t("b-row",{staticStyle:{"padding-bottom":"20px"},attrs:{"align-h":"center"}},[t("ChangePassword")],1)],1):t("b-container",{staticClass:"signedup-container"},[t("b-alert",{attrs:{show:s.dismissCountDown,dismissible:"",variant:"success"},on:{dismissed:function(n){s.dismissCountDown=0},"dismiss-count-down":s.countDownChanged}},[t("p",[s._v(s._s(s.messages))])]),t("b-row",{staticStyle:{"padding-bottom":"20px"},attrs:{"align-h":"center"}},[t("SignIn")],1),t("b-row",{staticStyle:{"padding-bottom":"20px"},attrs:{"align-h":"center"}},[t("b-button",{on:{click:s.userLink}},[s._v("Create A User Account")])],1),t("b-row",{staticStyle:{"padding-bottom":"20px"},attrs:{"align-h":"center"}},[t("b-button",{on:{click:s.businessLink}},[s._v("Create A Business Account")])],1)],1)],1)],1)},r=[],a=function(){var s=this,n=s.$createElement,t=s._self._c||n;return t("div",[t("b-alert",{attrs:{show:s.errorDismissCountDown,dismissible:"",variant:"danger"},on:{dismissed:function(n){s.errorDismissCountDown=0},"dismiss-count-down":s.errorCountDownChanged}},[t("p",[s._v(s._s(s.errors))])]),t("b-form",{on:{submit:function(n){return n.preventDefault(),s.signIn(n)}}},[t("b-form-group",{staticClass:"username-input-group"},[t("b-form-input",{staticClass:"username-input",attrs:{required:"",placeholder:"Enter Username"},model:{value:s.form.username,callback:function(n){s.$set(s.form,"username",n)},expression:"form.username"}})],1),t("b-form-group",{staticClass:"password-input-group"},[t("b-form-input",{staticClass:"password-input",attrs:{required:"",placeholder:"Enter Password"},model:{value:s.form.password,callback:function(n){s.$set(s.form,"password",n)},expression:"form.password"}})],1),t("b-button",{attrs:{type:"submit"}},[s._v("Sign in")])],1)],1)},u=[],c=t("bc3a"),d=t.n(c),l=t("56d7"),m={name:"UserSignIn",data:function(){return{form:{username:"",password:""},dismissSecs:10,dismissCountDown:0,errorDismissCountDown:0,errors:""}},methods:{signIn:function(){var s=this,n={username:this.form.username,password:this.form.password};d.a.post("/api/account/signin",n).then((function(s){l["eventBus"].$emit("signin-success",s.data.data)})).catch((function(n){s.errors=n.response.data.error,s.showErrorAlert()})).then((function(){s.resetForm()}))},resetForm:function(){this.form.username="",this.form.password=""},showErrorAlert:function(){this.errorDismissCountDown=this.dismissSecs},errorCountDownChanged:function(s){this.errorDismissCountDown=s}}},h=m,p=t("2877"),g=Object(p["a"])(h,a,u,!1,null,null,null),f=g.exports,w=function(){var s=this,n=s.$createElement,t=s._self._c||n;return t("div",{staticClass:"component",attrs:{id:"sign-out"}},[t("b-button",{on:{click:s.signOut}},[s._v(" Sign Out")])],1)},b=[],v={name:"SignOut",methods:{signOut:function(){d.a.delete("/api/account/").then((function(){l["eventBus"].$emit("signout-success",!0)})).catch((function(){l["eventBus"].$emit("signout-success",!0)}))}}},C=v,S=Object(p["a"])(C,w,b,!1,null,null,null),D=S.exports,_=function(){var s=this,n=s.$createElement,t=s._self._c||n;return t("div",[t("b-form",{on:{submit:function(n){return n.preventDefault(),s.changePassword(n)}}},[t("b-form-group",{staticClass:"password-input-group"},[t("b-form-input",{staticClass:"password-input",attrs:{required:"",placeholder:"Enter Password"},model:{value:s.form.password,callback:function(n){s.$set(s.form,"password",n)},expression:"form.password"}})],1),t("b-button",{attrs:{type:"submit"}},[s._v("Change Password")])],1),s.errors.length?t("div",{staticClass:"error-message",staticStyle:{width:"250px"}},[t("b",[s._v("Please correct the following error(s):")]),t("ul",s._l(s.errors,(function(n){return t("li",{key:n.id},[s._v(s._s(n))])})),0)]):s._e()],1)},$=[],k={name:"ChangePassword",data:function(){return{form:{password:""},password:"",errors:[],success:""}},methods:{changePassword:function(){var s={password:this.form.password};d.a.put("/api/account/",s).then(l["eventBus"].$emit("password-change-success",!0)),this.resetForm(),this.clearMessages()},resetForm:function(){this.form.password=""},clearMessages:function(){var s=this;setInterval((function(){s.errors=[]}),5e3)}}},x=k,I=Object(p["a"])(x,_,$,!1,null,null,null),A=I.exports,B={name:"UserSettings",components:{SignIn:f,SignOut:D,ChangePassword:A},data:function(){return{isSignedIn:!1,messages:"",dismissSecs:5,dismissCountDown:0,errorDismissCountDown:0}},created:function(){var s=this,n=this.$cookie.get("scope-auth");n&&(this.isSignedIn=!0),l["eventBus"].$on("signin-success",(function(n){s.$cookie.set("scope-auth",n.id),s.$cookie.set("business-auth",n.businessID),s.isSignedIn=!0,s.messages="You have been signed in!",s.showSuccessAlert()})),l["eventBus"].$on("signout-success",(function(){s.$cookie.set("scope-auth",""),s.$cookie.set("business-auth",""),s.isSignedIn=!1,s.messages="You have been signed out!",s.showSuccessAlert()})),l["eventBus"].$on("signup-success",(function(){s.messages="You have been signed up! Sign in to continue.",s.showSuccessAlert()})),l["eventBus"].$on("password-change-success",(function(){s.messages="Your password has been changed",s.showSuccessAlert()}))},methods:{clearMessages:function(){var s=this;setInterval((function(){s.messages=[]}),5e3)},userLink:function(){this.$router.push("/usersignup")},businessLink:function(){this.$router.push("/businesssignup")},countDownChanged:function(s){this.dismissCountDown=s},showSuccessAlert:function(){this.dismissCountDown=this.dismissSecs},showErrorAlert:function(){this.errorDismissCountDown=this.dismissSecs},errorCountDownChanged:function(s){this.errorDismissCountDown=s}}},E=B,O=(t("1442"),Object(p["a"])(E,i,r,!1,null,"7d823c6c",null)),y=O.exports,P=t("d000"),U={name:"Settings",components:{UserSettings:y,NavBar:P["a"]}},j=U,F=Object(p["a"])(j,e,o,!1,null,null,null);n["default"]=F.exports},"74e6":function(s,n,t){}}]);
//# sourceMappingURL=chunk-424dc0a3.79379e5d.js.map